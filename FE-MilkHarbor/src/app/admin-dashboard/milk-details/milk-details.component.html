<div class="milk-details">
    <div class="title text-center m-3">
        <h1 >Milk Collection Details</h1>
        <i class="bi bi-file-earmark-plus" (click)="onPopUp()"></i>
    </div>
    <div class="details row">
        <div class="detail col-md-3" *ngFor="let detail of milkDetails">
            <div class="row1">
                <span> {{ detail.createdAt | date:'medium' }}</span>
                <span>
                    <i class="bi bi-trash" (click)="onDelete(detail._id)"></i>
                </span>
            </div>
            <div class="row1">
                <span>Farmer : {{detail.username}}</span>
                <span>Status : {{detail.status | titlecase}}</span>
            </div>
            <div class="row1">
                <span>Quantity : {{detail.milk_qnt}}</span>
                <span>Fat : {{detail.milk_fat}}</span>
                <span>Lac/Deg : {{detail.milk_lac_deg}}</span>
                <span>Snf : {{detail.milk_snf}}</span>
            </div>
            <div class="row1">
                <span>Price Per Liter : {{detail.price_per_liter}}</span>
                <span>Total Price: {{detail.total}}</span>
            </div> 
        </div>
    </div>
    <div class="milkCollection" *ngIf="isEdit">
        <div class="form">
            <form [formGroup]="reportForm">
                <div class="close">
                    <i class="bi bi-x-lg" (click)="onClose()"></i>
                </div>
                <h3 class="text-center">Edit Milk Collection</h3>
                <div class="form-group">
                    <label for="username">Select Farmer &nbsp;<span class="text-danger">*</span></label>
                    <input autocomplete="off" type="text" id="f_id" (click)="toggleDropdown()" [(ngModel)]="selectedOption"
                        class="form-control" placeholder="Select Farmer" formControlName="username" required >
                </div>
                <i class="bi bi-chevron-down" [ngClass]="{'rotate':isDropdownOpen}" (click)="toggleDropdown()"></i>
    
                <ul class="dropdown-list" *ngIf="isDropdownOpen">
                    <li (click)="onFarmer('ALL')">All</li>
                    <li *ngFor="let farmer of FarmersList" (click)="onFarmer(farmer.username)">{{ farmer.username }}</li>
                </ul>
    
                <div class="form-group" *ngIf="selectedOption!=='ALL'">
                    <label for="username">Start Date</label>&nbsp;&nbsp;&nbsp;
                    <input type="date" class="form-control" formControlName="start_date">
                </div>
                <div class="form-group" *ngIf="selectedOption!=='ALL'">
                    <label for="username">End Date</label>&nbsp;&nbsp;&nbsp;
                    <input type="date" class="form-control" formControlName="end_date" >
                </div>
                <div class="form-group make-center">
                    <button class="login" style="height: 40px;" [ngClass]="{'disabled':!reportForm.valid}" [disabled]="!reportForm.valid" (click)="onReport()">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="load" *ngIf="isLoader">
    <span class="loader"></span>
</div>